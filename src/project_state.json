{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 7,
  "summary": "3D first-person horror/survival narrative game \"Sprunki: Son of Black\" set in a photorealistic industrial facility (UE5 style) with a cartoonish antagonist \"The Green Hood,\" featuring mobile controls, chase/stealth gameplay, bottom-screen text dialogue, and a signature hood-fall/look-away stress mechanic.",
  "architectural_notes": [
    "Game is 3D first-person horror/survival with no combat; progression via stealth, barricades, and puzzles.",
    "Visual direction: photorealistic industrial facility contrasted with stylized/cartoonish antagonist.",
    "UI uses bottom-screen text dialogue box (RPG-like) as primary narrative/antagonist communication.",
    "Signature gameplay mechanic: hood-fall/look-away reaction tied to stress/penalty system.",
    "Target includes mobile controls (touch input)."
  ],
  "known_issues": [
    "Map/scene is rendering completely black (likely lighting/material/camera/exposure issue), making the environment not visible."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-create-a-coherent-first-person-horror-game-frontend-theme-and-apply-it-consistently-across-ui-menus-hud-dialogue-box-buttons-gritty-industrial-clinical-facility-vibe-with-high-contrast-warning-colors-readable-typography-and-a-distinct-jagged-pixel-horror-font-style-for-threat-text-do-not-use-a-blue-purple-theme",
      "title": "Create a coherent first-person horror game frontend theme and apply it consistently across UI (menus, HUD, dialogue box, buttons): gritty industrial/clinical facility vibe with high-contrast warning colors, readable typography, and a distinct jagged/pixel-horror font style for threat text. Do not use a blue/purple theme.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-playable-3d-first-person-scene-of-an-industrial-facility-photorealistic-realistic-lighting-feel-using-three-js-react-three-fiber-including-corridor-cafeteria-spaces-basic-props-flickering-lights-and-an-overall-tense-atmosphere-use-a-first-person-camera-with-limited-vision-hood-shadow-vignette-effect",
      "title": "Implement a playable 3D first-person scene of an industrial facility (photorealistic/realistic lighting feel) using Three.js + React Three Fiber, including: corridor/cafeteria spaces, basic props, flickering lights, and an overall tense atmosphere. Use a first-person camera with limited vision (hood-shadow/vignette effect).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-add-mobile-first-controls-for-first-person-movement-and-interaction-on-screen-joystick-for-movement-look-controls-swipe-drag-and-an-interact-button-for-context-actions-e-g-open-door-hide-barricade-read-prompt-ensure-it-also-remains-usable-on-desktop-wasd-mouse-optional-without-requiring-mobile",
      "title": "Add mobile-first controls for first-person movement and interaction: on-screen joystick for movement, look controls (swipe/drag), and an interact button for context actions (e.g., open door, hide, barricade, read prompt). Ensure it also remains usable on desktop (WASD/mouse optional) without requiring mobile.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-bottom-screen-dialogue-thought-threat-system-a-text-box-that-appears-at-the-bottom-of-the-screen-with-jagged-horror-styling-supports-timed-lines-and-can-partially-block-the-view-as-described-provide-an-api-to-trigger-lines-from-scripted-events-and-ai-events",
      "title": "Implement a bottom-screen dialogue/thought/threat system: a text box that appears at the bottom of the screen with jagged horror styling, supports timed lines, and can partially block the view as described. Provide an API to trigger lines from scripted events and AI events.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-create-the-antagonist-character-the-green-hood-as-a-stylized-cartoony-3d-entity-contrasted-against-the-realistic-facility-include-tall-humanoid-hoodie-silhouette-dark-green-ragged-hood-glowing-neon-eyes-and-a-hidden-mouth-that-can-be-revealed-dirty-bubble-like-circular-brown-wrinkled-mouth-with-jagged-lips",
      "title": "Create the antagonist character \"The Green Hood\" as a stylized/cartoony 3D entity contrasted against the realistic facility. Include: tall humanoid hoodie silhouette, dark green ragged hood, glowing neon eyes, and a hidden mouth that can be revealed (Dirty-Bubble-like circular brown wrinkled mouth with jagged lips).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-enemy-ai-state-machine-for-the-green-hood-with-at-least-these-states-idle-stare-encounter-patrol-search-chase-include-proximity-detection-line-of-sight-considerations-and-a-chase-escalation-for-scripted-moments-enemy-does-not-speak-instead-triggers-threat-text-through-the-dialogue-system",
      "title": "Implement enemy AI state machine for The Green Hood with at least these states: idle/stare encounter, patrol/search, chase. Include proximity detection, line-of-sight considerations, and a chase escalation for scripted moments. Enemy does not speak; instead triggers threat text through the dialogue system.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-signature-hood-fall-mechanic-during-chase-or-jump-scare-moments-the-enemy-hood-can-fall-to-reveal-the-mouth-when-revealed-if-the-player-looks-at-the-mouth-camera-facing-it-within-a-short-reaction-window-the-enemy-reacts-with-brutal-speed-to-pull-the-hood-back-up-and-the-player-receives-a-stress-penalty-provide-clear-feedback-when-stress-increases",
      "title": "Implement the signature \"hood fall\" mechanic: during chase or jump-scare moments, the enemy hood can fall to reveal the mouth. When revealed, if the player looks at the mouth (camera facing it within a short reaction window), the enemy reacts with \"brutal\" speed to pull the hood back up and the player receives a stress penalty. Provide clear feedback when stress increases.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-no-weapons-survival-gameplay-interactions-1-hide-spots-e-g-locker-cabinet-that-break-detection-2-barricade-doors-to-delay-enemy-pursuit-and-3-simple-puzzle-gating-e-g-find-a-keycard-code-to-unlock-new-facility-areas",
      "title": "Implement no-weapons survival gameplay interactions: (1) hide spots (e.g., locker/cabinet) that break detection, (2) barricade doors to delay enemy pursuit, and (3) simple puzzle gating (e.g., find a keycard/code) to unlock new facility areas.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-audio-systems-for-tension-and-telegraphing-a-low-frequency-hum-that-intensifies-when-the-green-hood-is-near-plus-a-mouth-smacking-sound-when-he-gets-close-especially-during-mouth-reveal-moments-provide-volume-controls-mute-in-settings",
      "title": "Add audio systems for tension and telegraphing: a low-frequency hum that intensifies when The Green Hood is near, plus a mouth-smacking sound when he gets close (especially during mouth-reveal moments). Provide volume controls/mute in settings.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-script-and-implement-the-three-key-scenes-as-a-playable-vertical-slice-1-first-encounter-in-a-locked-cafeteria-with-the-bottom-text-you-look-crunchy-and-enemy-staring-in-a-corner-2-corridor-chase-where-the-hood-falls-off-mid-chase-and-speed-increases-3-ending-where-player-reaches-the-surface-but-final-text-shows-eat-you-whole-and-fades-to-black-implying-failure",
      "title": "Script and implement the three key scenes as a playable vertical slice: (1) First encounter in a locked cafeteria with the bottom text \"You look... crunchy.\" and enemy staring in a corner; (2) Corridor chase where the hood falls off mid-chase and speed increases; (3) Ending where player reaches the surface but final text shows \"Eat you whole\" and fades to black implying failure.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-add-required-static-generated-images-to-the-frontend-and-use-them-in-ui-a-dialogue-box-frame-background-mobile-control-icons-joystick-base-knob-interact-button-and-a-subtle-vignette-hood-overlay-texture-store-them-under-frontend-public-assets-generated-and-reference-them-directly-from-the-frontend-no-backend-image-serving",
      "title": "Add required static generated images to the frontend and use them in UI: a dialogue box frame/background, mobile control icons (joystick base/knob, interact button), and a subtle vignette/hood overlay texture. Store them under frontend/public/assets/generated and reference them directly from the frontend (no backend image serving).",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-3d-scene-rendering-so-the-facility-environment-is-visible-not-fully-black-by-adjusting-scene-lighting-and-renderer-settings-exposure-tone-mapping-background-while-preserving-the-intended-dark-industrial-horror-mood",
      "title": "Fix the 3D scene rendering so the facility environment is visible (not fully black), by adjusting scene lighting and renderer settings (exposure/tone mapping/background) while preserving the intended dark industrial-horror mood.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-prevent-full-screen-overlays-from-unintentionally-making-gameplay-appear-black-by-ensuring-the-hood-vignette-and-fade-overlay-do-not-fully-obscure-the-scene-during-normal-play-e-g-adjust-blend-opacity-defaults-and-ensure-fadetoblack-is-inactive-unless-explicitly-triggered",
      "title": "Prevent full-screen overlays from unintentionally making gameplay appear black by ensuring the hood vignette and fade overlay do not fully obscure the scene during normal play (e.g., adjust blend/opacity defaults and ensure FadeToBlack is inactive unless explicitly triggered).",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-3d-game-map-react-three-fiber-canvas-render-fullscreen-by-ensuring-the-gameview-container-fills-the-viewport-width-and-height-and-the-app-root-elements-html-body-root-allow-100-height-without-introducing-scrollbars",
      "title": "Make the 3D game map (React Three Fiber Canvas) render fullscreen by ensuring the GameView container fills the viewport (width and height) and the app root elements (html/body/#root) allow 100% height without introducing scrollbars.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create core 3D first-person horror/survival project structure for \"Sprunki: Son of Black\" (UE5-style photoreal facility vs cartoonish character).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement mobile controls for first-person movement and interaction.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Add bottom-screen text box dialogue/thought system with jagged font that can partially block view.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Design and implement antagonist AI \"The Green Hood\" (silent, threatening text, patrol/encounter/chase behaviors).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Implement \"hood fall\" mechanic: when hood falls, player must look away/hide quickly; if looked at triggers brutal speed reaction + stress penalty.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "No-weapons stealth gameplay: hiding, barricading doors, and puzzle-solving to unlock facility areas.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Audio systems: proximity low-frequency hum and mouth-smacking sounds for tension/telegraphing.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Script key scenes: first encounter in cafeteria with threat text, corridor chase with hood reveal/speed change, and ending sequence implying failed escape.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Backend: implement persistent player/session state in the single Motoko actor to support the vertical slice, including at minimum: player stress level, puzzle progression flags (e.g., keycard/code found), and current scene/checkpoint. Expose query/update methods used by the frontend to load/save this state.",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Make the 3D map/game view render fullscreen (expand canvas to fill viewport; adjust UI layout accordingly).",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "3d",
  "projectName": "Sprunki: Son of Black",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}